@model Models.ViewModels.HomeIndexViewModel
@{
    ViewData["Title"] = "Home Page";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<!DOCTYPE html>
<html lang="en">

<body>

    <div class="preloader">
        <div class="preloader-inner">
            <div class="preloader-icon">
                <span></span>
                <span></span>
            </div>
        </div>
    </div>

    <section class="hero-slider bg-grey">
        <div class="container">
            <div class="main-hero-slider owl-carousel owl-theme">
                @foreach (var slider in Model.Sliders)
                {
                    <div class="item">
                        <div class="single-slider item">
                            <div class="row">
                                <div class="col-lg-6 col-md-8 offset-lg-3 my-auto">
                                    <div class="text-inner">
                                        <div class="hero-text">
                                            <h1>
                                                <span>@slider.SliderTitle</span> @slider.SliderSubTitle
                                            </h1>
                                            <p>@Html.Raw(slider.SliderDescription)</p>
                                            <div class="button">
                                                <a href="#" class="btn">Shop Now!</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-4 my-auto">
                                    <img src="@Url.Content("~/Assets/content/assets/img/slider/" + slider.SliderImage)" class="w-100" alt="">
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </section>

    <div class="product-area section">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="section-title d-flex justify-content-between align-center">
                        <div class="d-flex section-title-left">
                            <i class="flaticon-tags"></i>
                            <h2>New Item</h2>
                        </div>
                        <div class="section-title-right">
                            <a href="#">View More <i class="fas fa-arrow-right"></i></a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="product-slider owl-carousel owl-theme">
                @foreach (var product in Model.TopProducts)
                {
                    <div class="item">
                        <div class="single-product">
                            <div class="product-img">
                                <a href="@Url.Action("Detail", "Product", new { id = product.ProductId })">
                                    <img class="product-img" src="~/Assets/Img_Products/@product.ProductImg" alt="@product.ProductName" />
                                    <span class="new">New</span>
                                </a>
                                <div class="button-head">
                                    <div class="product-action">
                                        <a data-bs-toggle="modal" data-bs-target="#staticBackdrop" href="#"><i class="fas fa-eye"></i><span>Quick Shop</span></a>
                                        <a href="#"><i class="fas fa-heart"></i><span>Add to Wishlist</span></a>
                                        <a href="#"><i class="fas fa-exchange"></i><span>Add to Compare</span></a>
                                    </div>
                                </div>
                            </div>
                            <div class="product-content">
                                <h3><a href="#">@product.ProductName</a></h3>
                                <div class="product-rate">
                                    @for (int i = 1; i <= 5; i++)
                                    {
                                        if (i <= product.Rating)
                                        {
                                            <i class="fas fa-star"></i>
                                        }
                                        else
                                        {
                                            <i class="far fa-star"></i>
                                        }
                                    }
                                </div>
                                <div class="d-flex justify-content-between">
                                    <div class="product-price">
                                        <span>$@product.Price</span>
                                    </div>
                                    <button class="product-cart-btn" type="button"><i class="fas fa-shopping-cart"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>


    <section class="midium-banner" id="deal">
        <div class="container">
            <div class="row">

                <div class="col-lg-6 col-md-6 col-12">
                    <div class="single-banner">
                        <img src="~/Assets/content/assets/img/mid-banner1.jpg" alt="#">
                        <div class="content">
                            <p>Top Collectons</p>
                            <h3>Women's Shirt <br>Up to<span> 50%</span></h3>
                            <a href="#">Shop Now</a>
                        </div>
                    </div>
                </div>


                <div class="col-lg-6 col-md-6 col-12">
                    <div class="single-banner">
                        <img src="~/Assets/content/assets/img/mid-banner2.jpg" alt="#">
                        <div class="content">
                            <p>women shoes</p>
                            <h3>summer Collectons <br> up to <span>30%</span></h3>
                            <a href="#" class="btn">Shop Now</a>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>


    <div class="product-area section">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="section-title d-flex justify-content-between align-center">
                        <div class="d-flex section-title-left">
                            <i class="flaticon-hot-deal"></i>
                            <h2>Top Rated Products</h2>
                        </div>
                        <div class="section-title-right">
                            <a href="#">View More <i class="fas fa-arrow-right"></i></a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="product-slider owl-carousel owl-theme">
                @foreach (var product in Model.TopRatings)
                {
                    <div class="item">
                        <div class="single-product">
                            <div class="product-img">
                                <a href="@Url.Action("Detail", "Product", new { id = product.ProductId })">
                                    <img class="product-img" src="~/Assets/Img_Products/@product.ProductImg " alt="@product.ProductName" />
                                    <span class="out-of-stock">Hot</span>  @* Bạn có thể đổi thành "Hot" hay bất cứ nhãn nào *@
                                </a>
                                <div class="button-head">
                                    <div class="product-action">
                                        <a data-bs-toggle="modal" data-bs-target="#staticBackdrop" href="#"><i class="far fa-eye"></i><span>Quick Shop</span></a>
                                        <a href="#"><i class="far fa-heart"></i><span>Add to Wishlist</span></a>
                                        <a href="#"><i class="far fa-exchange"></i><span>Add to Compare</span></a>
                                    </div>
                                </div>
                            </div>
                            <div class="product-content">
                                <h3><a href="@Url.Action("Detail", "Product", new { id = product.ProductId })">@product.ProductName</a></h3>
                                <div class="product-rate">
                                    @for (int i = 1; i <= 5; i++)
                                    {
                                        if (i <= product.Rating)
                                        {
                                            <i class="fas fa-star"></i>
                                        }
                                        else
                                        {
                                            <i class="far fa-star"></i>
                                        }
                                    }
                                </div>
                                <div class="d-flex justify-content-between">
                                    <div class="product-price">
                                        <span>$@product.Price.ToString("F2")</span>
                                    </div>
                                    <button class="product-cart-btn" type="button"><i class="fal fa-shopping-cart"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>

    <div class="product-area section pt-0">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 mb-5">
                    <div class="product-brand">
                        <h5>All Brands</h5>
                        <div class="brand-list">
                            <button class="brand-pill brand-filter-btn active" data-brandid="">
                                All Products
                            </button>
                            @foreach (var brand in Model.ProductByBrand)
                            {
                                <button class="brand-pill brand-filter-btn" data-brandid="@brand.BrandId">
                                    <img src="~/Assets/Img_Brands/@brand.Logo" alt="@brand.BrandName" />
                                    @brand.BrandName
                                </button>
                            }
                            
                        </div>

                    </div>
                </div>
                <div class="col-lg-9">
                    <div class="row">
                        <div class="col-12">
                            <div class="section-title d-flex justify-content-between align-center">
                                <div class="d-flex section-title-left">
                                    <i class="flaticon-list-text"></i>
                                    <h2>List</h2>
                                </div>
                                <div class="section-title-right">
                                    <a href="#">View More <i class="fas fa-long-arrow-right"></i></a>
                                </div>
                            </div>
                        </div>

                        <div id="product-list">
                            @Html.Partial("_ProductListPartial", Model.Products)
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
    @section Scripts {
        <script>
            $(document).ready(function () {
                // Khi click chọn brand
                $('.brand-filter-btn').click(function () {
                    $('.brand-filter-btn').removeClass('active');
                    $(this).addClass('active');

                    var brandId = $(this).data('brandid');
                    var url = '/Home/GetProductsByBrand';

                    if (brandId !== undefined && brandId !== "") {
                        url += '?brandId=' + brandId;
                    }

                    $.ajax({
                        url: url,
                        type: 'GET',
                        success: function (result) {
                            $('#product-list').html(result);
                        },
                        error: function (xhr) {
                            alert("Lỗi khi tải sản phẩm! Chi tiết: " + xhr.statusText);
                        }
                    });
                });

                // ✅ Tự động gọi AJAX để hiển thị tất cả sản phẩm ngay khi load
                $('.brand-filter-btn[data-brandid=""]').trigger('click');
            });

        </script>
    }

    <section class="cown-down">
        <div class="section-inner">
            <div class="container-fluid p-0">
                <div class="row g-0">
                    <div class="col-lg-6 col-12">
                        <div class="image">
                            <img src="~/Assets/content/assets/img/deal.jpg" alt="#">
                        </div>
                    </div>
                    <div class="col-lg-6 col-12">
                        <div class="content">
                            <div class="heading-block">
                                <p class="small-title">Todays Deal</p>
                                <h3 class="title">Sweater New Trending 2021</h3>
                                <p class="text">There are many variations of passages of lorem ipsum available but the majority have suffered alteration in some form.</p>
                                <h1 class="price">$1000 <s>$1500</s></h1>
                                <div class="coming-time">
                                    <div class="clearfix" data-countdown="2024/12/30"></div>
                                </div>
                                <div class="mt-5">
                                    <a href="#" class="count-buy-btn">Buy Now</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="shop-services section home">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-6 col-12">

                    <div class="single-service">
                        <i class="fal fa-truck"></i>
                        <h4>Free Delivery</h4>
                        <p>Orders over $150</p>
                    </div>

                </div>
                <div class="col-lg-3 col-md-6 col-12">

                    <div class="single-service">
                        <i class="fal fa-sync"></i>
                        <h4>Get Refund</h4>
                        <p>Within 30 days returns</p>
                    </div>

                </div>
                <div class="col-lg-3 col-md-6 col-12">

                    <div class="single-service">
                        <i class="fal fa-lock"></i>
                        <h4>Safe Payment</h4>
                        <p>100% secure payment</p>
                    </div>

                </div>
                <div class="col-lg-3 col-md-6 col-12">

                    <div class="single-service">
                        <i class="fal fa-headset"></i>
                        <h4>24/7 Support</h4>
                        <p>Feel Free To Call us</p>
                    </div>

                </div>
            </div>
        </div>
    </section>


    <section class="shop-blog section">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="section-title d-flex justify-content-between align-center">
                        <div class="d-flex section-title-left">
                            <i class="fas fa-blog"></i>
                            <h2>Latest News</h2>
                        </div>
                        <div class="section-title-right">
                            <a href="#">View More <i class="fas fa-long-arrow-right"></i></a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-4 col-md-6 col-12">

                    <div class="shop-single-blog">
                        <img src="~/Assets/content/assets/img/blog/1.jpg" alt="#">
                        <div class="content">
                            <p class="date">30 May, 2021. Sunday</p>
                            <a href="#" class="title">There are many variations available</a>
                            <p>It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout.</p>
                            <a href="#" class="more-btn">Read More <i class="far fa-long-arrow-right"></i> </a>
                        </div>
                    </div>

                </div>
                <div class="col-lg-4 col-md-6 col-12">

                    <div class="shop-single-blog">
                        <img src="~/Assets/content/assets/img/blog/2.jpg" alt="#">
                        <div class="content">
                            <p class="date">30 May, 2021. Sunday</p>
                            <a href="#" class="title">There are many variations available</a>
                            <p>It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout.</p>
                            <a href="#" class="more-btn">Read More <i class="far fa-long-arrow-right"></i> </a>
                        </div>
                    </div>

                </div>
                <div class="col-lg-4 col-md-6 col-12">

                    <div class="shop-single-blog">
                        <img src="~/Assets/content/assets/img/blog/3.jpg" alt="#">
                        <div class="content">
                            <p class="date">30 May, 2021. Sunday</p>
                            <a href="#" class="title">There are many variations available</a>
                            <p>It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout.</p>
                            <a href="#" class="more-btn">Read More <i class="far fa-long-arrow-right"></i> </a>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </section>
    <section class="shop-newsletter py-5">
        <div class="container">
            <div class="inner-top">
                <div class="row">
                    <div class="col-lg-8 offset-lg-2 col-12">

                        <div class="inner">
                            <h4>Newsletter</h4>
                            <p> Subscribe to our newsletter and get <span>30%</span> off your first purchase</p>
                            <form action="#" method="get" class="newsletter-inner">
                                <input name="email" placeholder="Your email address" required="" type="email">
                                <button class="btn">Subscribe <i class="fal fa-paper-plane"></i></button>
                            </form>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </section>


    <div class="modal" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdrop" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
            <div class="modal-content">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12">
                            <img src="~/Assets/content/assets/img/products/p1.png" alt="#">
                        </div>
                        <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12">
                            <div class="quickview-content">
                                <h2>Xbeats Bluetooth Earphones</h2>
                                <div class="d-flex mb-3">
                                    <span>Brand:</span>
                                    <b>Xbeats</b>
                                </div>
                                <div class="d-flex mb-3">
                                    <span>Category:</span>
                                    <b>Headphones</b>
                                </div>
                                <div class="d-flex mb-3">
                                    <span>Tated:</span>
                                    <div class="quickview-ratting-review">
                                        <div class="quickview-ratting-wrap">
                                            <div class="quickview-ratting">
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fal fa-star"></i>
                                                <a href="#"> (50)</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <h3>$29.00</h3>
                                <div class="quickview-stock">
                                    <span><i class="fa fa-check-circle-o"></i> Stock Available</span>
                                </div>
                                <div class="add-to-cart">
                                    <a href="#" class="btn">Add to cart</a>
                                </div>
                                <div class="default-social">
                                    <h4 class="share-now">Share:</h4>
                                    <ul>
                                        <li><a href="#"><i class="fab fa-facebook-f"></i></a></li>
                                        <li><a href="#"><i class="fab fa-twitter"></i></a></li>
                                        <li><a href="#"><i class="fab fa-pinterest-p"></i></a></li>
                                        <li><a href="#"><i class="fab fa-instagram"></i></a></li>
                                        <li><a href="#"><i class="fab fa-linkedin-in"></i></a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


</body>
</html>
